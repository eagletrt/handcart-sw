{% block body %}

    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="/">
            <img src="{{ url_for('static', filename='images/eagle.png') }}" width="40">
            E-Agle TRT - Handcart
        </a>

        <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-toggle="collapse"
                data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="nav-container">
            <div class="left">
                <div class="status">BMS state: <b id="bmsState"></b></div>
                <div class="status">State: <b id="hcState"></b></div>
                <div class="status">Brusa state: <b id="brusaState"></b></div>
                <div class="status">Elapsed time: <b id="timeText"></b></div>
            </div>
            <div class="left">
                <button type="button" class="btn btn-light position-relative hbtn"
                        onclick="window.location.href = './warnings'">
                    <span data-feather="alert-triangle" class="ico orange"></span>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                          id="nWarnings">
                    </span>
                </button>
            </div>
            <div class="left">
                <button type="button" class="btn btn-light position-relative hbtn"
                        onclick="window.location.href = './errors'">
                    <span data-feather="alert-triangle" class="ico red"></span>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                          id="nErrors">
                    </span>
                </button>
            </div>
            <!--<div class="left">
            </div>-->
            <div class="left">
                <form method="POST" id="sdForm"> <!-- Shutdown Button Form -->
                    <input type="hidden" name="com-type" value="shutdown">
                    <input type="hidden" name="value" value="true">
                    <input type="submit" value="TS OFF" id="shutdown" class="btn btn-danger btn-lg">
                </form>
            </div>
            <div class="right">
                <!-- fast-charge and precharge state -->
                <span class="btn btn-success" id="fo" title="Fan Override">
                    FO
                </span>
                <div class="status"><i id="fan" class="fa-solid fa-fan"></i><span id="fanSpeed"></span>%</div>
                <div class="status"><span id="temp"></span>°</div>
                <div class="status"><span id="volt"></span>V/<span id="COvolt"></span>V</div>
                <div class="status"><span id="amp"></span>A</div>
                <div class="status"><span id="charge"></span>%</div>
            </div>
        </div>
    </nav>

    <script>
        updateHeader();
        /*document.getElementById("bmsState").innerHTML = sessionStorage.getItem("bmsState");
        document.getElementById("hcState").innerHTML = sessionStorage.getItem("hcState");
        document.getElementById("brusaState").innerHTML = sessionStorage.getItem("brusaState");
        if(sessionStorage.getItem("timeText") == null) {
            document.getElementById("timeText").innerHTML = "00:00";
        } else {
            document.getElementById("timeText").innerHTML = sessionStorage.getItem("timeText");
        }
        document.getElementById("nWarnings").innerHTML = sessionStorage.getItem("warnings");
        document.getElementById("nErrors").innerHTML = sessionStorage.getItem("errors");
        if(sessionStorage.getItem("fcState") == "true") {

        } else {

        }
        document.getElementById("temp").innerHTML = sessionStorage.getItem("average_temp") + "°";
        document.getElementById("volt").innerHTML = sessionStorage.getItem("bus_voltage") + "V";
        document.getElementById("COvolt").innerHTML = sessionStorage.getItem("covValue") + "V";
        document.getElementById("amp").innerHTML = sessionStorage.getItem("current") + "A";
        document.getElementById("charge").innerHTML = sessionStorage.getItem("charge") + "%";*/


        let sdForm = document.getElementById("sdForm");

        let path = "action";

        formListener(sdForm, path);
    </script>

    <script src="{{ url_for('static', filename='js/status.js') }}"></script>

{% endblock %}
