<!doctype html>
<html lang="en">

<head>
    {% include 'include/head.html' %}
</head>

<body>
{% include 'include/header.html' %}

<div class="container-fluid">
    <div class="row">
        {% include 'include/sidebar.html' %}

        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
            <div class="container col-md-12 ml-sm-auto col-lg-12 px-md-4">
                <div class="row" id="mainRow">
                    <div class="col-sm">
                        <div id="voltChart"></div>
                    </div>
                    <div class="col-sm">
                        <div class="row">
                            <div class="col-sm">
                                <form method="POST" id="startForm"> <!-- Start Button Form -->
                                    <input type="hidden" name="com-type" value="precharge">
                                    <input type="hidden" name="value" value="true">
                                    <input type="submit" value="Precharge" id="start" class="btn btn-success btn-lg">
                                </form>

                                <form method="POST" id="stopForm"> <!-- Stop Button Form -->
                                    <input type="hidden" name="com-type" value="charge">
                                    <input type="hidden" name="value" value="false">
                                    <input type="submit" value="Stop" id="stop" class="btn btn-danger btn-lg">
                                </form>

                                <input type="submit" value="Precharging" id="cancel" class="btn btn-danger btn-lg" disabled>

                                <form method="POST" id="chargeForm"> <!-- Charge Button Form -->
                                    <input type="hidden" name="com-type" value="charge">
                                    <input type="hidden" name="value" value="true">
                                    <input type="submit" value="Charge" id="chargeBtn" class="btn btn-success btn-lg">
                                </form>

                                <form method="POST" id="okForm"> <!-- OK Button Form -->
                                    <input type="hidden" name="com-type" value="charge">
                                    <input type="hidden" name="value" value="false">
                                    <input type="submit" value="OK" id="ok" class="btn btn-success btn-lg">
                                </form>

                                <script>
                                    let startForm = document.getElementById("startForm");
                                    let stopForm = document.getElementById("stopForm");
                                    let chargeForm = document.getElementById("chargeForm");
                                    let okForm = document.getElementById("okForm");

                                    path = "action";

                                    formListener(startForm, path);
                                    formListener(stopForm, path);
                                    formListener(chargeForm, path);
                                    formListener(okForm, path);
                                </script>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm">
                                <div id="chargeChart"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm">
                        <div id="ampereChart"></div>
                    </div>
                </div>
                <div class="row align-items-center">
                    <div class="col-sm-4">
                        <div id="tempChart"></div>
                    </div>
                    <div class="col-sm-8">
                        <div class="row">
                            <div id="cellChart"></div>
                        </div>
                        <div class="row">
                            <div id="heatChart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script>
        // lineCharts parameters: path, chart's div, json's parameter, the zoom level, the header label's id, the unit of measure of the value
        createLineChart("bms-hv/volt", "volt", "bus_voltage", 1.25, "volt", "V");
        createChargeChart();
        createLineChart("bms-hv/ampere", "ampere", "current", 1.25, "amp", "A");
        createLineChart("bms-hv/temp", "temp", "average_temp", 1.25, "temp", "Â°");
        createCellChart();
        createHeatChart(6, 1, 3); // params: nrows, subcells (how many cells in a col), the grouping parameter
    </script>
</div>
{% include 'include/foot.html' %}
</body>

</html>
